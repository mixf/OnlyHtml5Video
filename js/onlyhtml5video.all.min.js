window.onlyHtml5Video=function(){function e(e,s){s=s||{},this.video=e,e.className+=" "+n+"-video",this.createContainer(),this.createControls(s.controls);var o=this.container,l=this.controls;t.warp(e,o),o.appendChild(l)}var t={createProgress:function(e){var t=document.createElement("DIV");t.className="total";var n=document.createElement("DIV");n.className="current",t.appendChild(n),t.current=n,this.on(t,"click",function(t){var s=this.offsetWidth,o=void 0===t.offsetX?t.layerX:t.offsetX;n.style.width=o/s*100+"%",e(o/s)});var s=!1;return this.on(t,"mousedown",function(e){0===e.button&&(s=!0)}),this.on(t,"mouseup",function(e){0===e.button&&(s=!1)}),this.on(t,"mousemove",function(e){if(s&&0===e.button){var t=this.offsetWidth,o=void 0===e.offsetX?e.layerX:e.offsetX;n.style.width=o/t*100+"%"}}),t},hasClass:function(e,t){return e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))},addClass:function(e,t){this.hasClass(e,t)||(e.className+=" "+t)},removeClass:function(e,t){var n=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className=e.className.replace(n,"")},replaceClass:function(e,t,n){this.removeClass(e,t),this.addClass(e,n)},toggleClass:function(e,t,n){this.hasClass(e,t)?this.replaceClass(e,t,n):this.hasClass(e,n)?this.replaceClass(e,n,t):this.addClass(e,t)},on:function(e,t,n){e.addEventListener(t,n,!1)},warp:function(e,t){var n=e.parentNode;n.replaceChild(t,e),t.appendChild(e)},setAttributes:function(e,t){for(var n in t)t.hasOwnProperty(n)&&e.setAttribute(n,t[n])}},n="onlyhtml5video",s=n+"-container",o=n+"-controls",l=n+"-play-button",u=n+"-progress-bar",a=n+"-mute-button",r=n+"-unmute-status",c=n+"-mute-status",i=n+"-volume-bar",m=n+"-fullscreen-button";e.prototype={createContainer:function(){var e=document.createElement("DIV");return e.className=s,this.container=e,e},createControls:function(e){e=e||{};var t=[].concat(e.hide),n=document.createElement("DIV");return n.className=o,this.controls=n,this.initPlayButton(),this.initProgressBar(),t.indexOf("mute")<0&&this.initMuteButton(),t.indexOf("volume")<0&&this.initVolumeBar(),t.indexOf("fullscreen")<0&&this.initFullscreenButton(),n},changePlayButton:function(e){var n="play",s="pause";e?t.replaceClass(this.controls.playButton,s,n):t.replaceClass(this.controls.playButton,n,s)},initPlayButton:function(){var e=this,n=this.video,s=document.createElement("DIV");s.className=l,this.controls.playButton=s,this.changePlayButton(n.paused),t.on(s,"click",function(){n.paused===!0?(e.changePlayButton(!1),n.play()):(e.changePlayButton(!0),n.pause())}),t.on(n,"ended",function(){e.changePlayButton(!0)}),this.controls.appendChild(s)},initProgressBar:function(){var e=this.video,n=document.createElement("DIV");n.className=u;var s=t.createProgress(function(t){e.currentTime=e.duration*t});n.appendChild(s),t.on(e,"timeupdate",function(){var t=e.currentTime/e.duration*100;s.current.style.width=t+"%"}),this.controls.appendChild(n)},changeMuteButton:function(e){var n=this.controls.muteButton.buttonContent;e?t.replaceClass(n,c,r):t.replaceClass(n,r,c)},greyVolume:function(){var e=this.controls.volumeBar;"undefined"!=typeof e&&t.toggleClass(e,"grey","")},initMuteButton:function(){var e=this,n=this.video,s=document.createElement("DIV");s.className=a;var o=document.createElement("DIV");s.appendChild(o),this.controls.muteButton=s,this.controls.muteButton.buttonContent=o,this.changeMuteButton(!n.muted),t.on(s,"click",function(){n.muted===!0?(e.changeMuteButton(!0),e.greyVolume(!1),n.muted=!1):(e.changeMuteButton(!1),e.greyVolume(!0),n.muted=!0)}),this.controls.appendChild(s)},initVolumeBar:function(){var e=this.video,n=(e.volume,document.createElement("DIV"));n.className=i;var s=t.createProgress(function(t){e.volume=t});this.controls.volumeBar=n,this.controls.volumeBar.volume=s,s.current.style.width=100*e.volume+"%",n.appendChild(s),this.controls.appendChild(n)},initFullscreenButton:function(){var e=(this.video,this.container),n="full",s="exit",o=document.createElement("DIV");o.className=m+" "+n,t.on(o,"click",function(){function l(){var l="fullscreen-mode";t.hasClass(e,l)?(document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():console.log("The bowser doesn't support fullscreen mode"),t.removeClass(e,l)):(document.documentElement.requestFullscreen?e.requestFullscreen():document.documentElement.msRequestFullscreen?e.msRequestFullscreen():document.documentElement.mozRequestFullScreen?e.mozRequestFullScreen():document.documentElement.webkitRequestFullscreen&&e.webkitRequestFullscreen(),t.addClass(e,l)),t.toggleClass(o,n,s)}l()}),this.controls.appendChild(o)}};var d={create:function(t,n){var s;if(s="string"==typeof t?document.querySelectorAll(t):t,!s.length)return new e(s,n);if(1===s.length)return new e(s[0],n);for(var o=s.length-1;o>=0;o--){var l=[];return l.push(new e(s,n)),l}}};return d}();