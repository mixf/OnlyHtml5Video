window.onlyHtml5Video=function(){function e(e,o){o=o||{};for(var s in t)o.hasOwnProperty(s)||(o[s]=t[s]);this.video=e,e.className+=" "+n+"-video",this.createContainer();var l=this.container;if(h.warp(e,l),o.initControls===!0){this.createControls(o.controls);var u=this.controls;l.appendChild(u)}}var t={initControls:!0},n="onlyhtml5video",o=n+"-container",s=n+"-controls",l=n+"-play-button",u=n+"-progress-bar",i=n+"-mute-button",r=n+"-unmute-status",a=n+"-mute-status",c=n+"-volume-bar",m=n+"-fullscreen-button",d="fullscreen-mode";e.prototype={createContainer:function(){var e=document.createElement("DIV");return e.className=o,this.container=e,e},createControls:function(e){e=e||{};var t=[].concat(e.disable),n=document.createElement("DIV");return n.className=s,this.controls=n,e.hidden===!0&&(n.style.visibility="hidden"),this.initPlayButton(),this.initProgressBar(),t.indexOf("mute")<0&&this.initMuteButton(),t.indexOf("volume")<0&&this.initVolumeBar(),t.indexOf("fullscreen")<0&&this.initFullscreenButton(),n},changePlayButton:function(e){var t="play",n="pause";e?h.replaceClass(this.controls.playButton,n,t):h.replaceClass(this.controls.playButton,t,n)},switchPlayButtonState:function(){var e=this.video;e.paused===!0?(this.changePlayButton(!1),e.play()):(this.changePlayButton(!0),e.pause())},initPlayButton:function(){var e=this,t=this.video,n=document.createElement("DIV");n.className=l,this.controls.playButton=n,this.changePlayButton(t.paused),h.on(n,"click",function(){e.switchPlayButtonState()}),h.on(t,"click",function(){e.switchPlayButtonState()}),h.on(t,"ended",function(){e.changePlayButton(!0)}),this.controls.appendChild(n)},initProgressBar:function(){var e=this.video,t=document.createElement("DIV");t.className=u;var n=h.createProgress(function(t){e.currentTime=e.duration*t});t.appendChild(n),h.on(e,"timeupdate",function(){var t=e.currentTime/e.duration*100;n.current.style.width=t+"%"}),this.controls.appendChild(t)},changeMuteButton:function(e){var t=this.controls.muteButton.buttonContent;e?h.replaceClass(t,a,r):h.replaceClass(t,r,a)},greyVolume:function(){var e=this.controls.volumeBar;"undefined"!=typeof e&&h.toggleClass(e,"grey","")},initMuteButton:function(){var e=this,t=this.video,n=document.createElement("DIV");n.className=i;var o=document.createElement("DIV");n.appendChild(o),this.controls.muteButton=n,this.controls.muteButton.buttonContent=o,this.changeMuteButton(!t.muted),h.on(n,"click",function(){t.muted===!0?(e.changeMuteButton(!0),e.greyVolume(!1),t.muted=!1):(e.changeMuteButton(!1),e.greyVolume(!0),t.muted=!0)}),this.controls.appendChild(n)},initVolumeBar:function(){var e=this.video,t=(e.volume,document.createElement("DIV"));t.className=c;var n=h.createProgress(function(t){e.volume=t});this.controls.volumeBar=t,this.controls.volumeBar.volume=n,n.current.style.width=100*e.volume+"%",t.appendChild(n),this.controls.appendChild(t)},initFullscreenButton:function(){var e=(this.video,this.container),t="full",n="exit",o=document.createElement("DIV");o.className=m+" "+t,h.on(o,"click",function(){function s(){document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement?(document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():console.log("The bowser doesn't support fullscreen mode"),h.removeClass(e,d)):(document.documentElement.requestFullscreen?e.requestFullscreen():document.documentElement.msRequestFullscreen?e.msRequestFullscreen():document.documentElement.mozRequestFullScreen?e.mozRequestFullScreen():document.documentElement.webkitRequestFullscreen&&e.webkitRequestFullscreen(),h.addClass(e,d)),h.toggleClass(o,t,n)}s()}),this.controls.appendChild(o)}};var h={createProgress:function(e){var t=document.createElement("DIV");t.className="total";var n=document.createElement("DIV");n.className="current",t.appendChild(n),t.current=n,this.on(t,"click",function(t){var o=this.offsetWidth,s=void 0===t.offsetX?t.layerX:t.offsetX;n.style.width=s/o*100+"%",e(s/o)});var o=!1;return this.on(t,"mousedown",function(e){0===e.button&&(o=!0)}),this.on(t,"mouseup",function(e){0===e.button&&(o=!1)}),this.on(t,"mousemove",function(e){if(o&&0===e.button){var t=this.offsetWidth,s=void 0===e.offsetX?e.layerX:e.offsetX;n.style.width=s/t*100+"%"}}),t},hasClass:function(e,t){return e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))},addClass:function(e,t){this.hasClass(e,t)||(e.className+=" "+t)},removeClass:function(e,t){var n=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className=e.className.replace(n,"")},replaceClass:function(e,t,n){this.removeClass(e,t),this.addClass(e,n)},toggleClass:function(e,t,n){this.hasClass(e,t)?this.replaceClass(e,t,n):this.hasClass(e,n)?this.replaceClass(e,n,t):this.addClass(e,t)},on:function(e,t,n){for(var o=t.split(" "),s=o.length-1;s>=0;s--)e.addEventListener(o[s],n,!1)},warp:function(e,t){var n=e.parentNode;n.replaceChild(t,e),t.appendChild(e)},setAttributes:function(e,t){for(var n in t)t.hasOwnProperty(n)&&e.setAttribute(n,t[n])}},f={create:function(t,n){var o;if(o="string"==typeof t?document.querySelectorAll(t):t,!o.length)return new e(o,n);if(1===o.length)return new e(o[0],n);for(var s=o.length-1;s>=0;s--){var l=[];return l.push(new e(o,n)),l}}};return f}();