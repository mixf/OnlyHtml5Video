window.onlyHtml5Video=function(){function e(e,n){n=n||{},this.video=e,e.className+=" "+t+"-video",this.createContainer(),this.createControls(n.controls);var s=this.container,o=this.controls;m.warp(e,s),s.appendChild(o)}var t="onlyhtml5video",n=t+"-container",s=t+"-controls",o=t+"-play-button",l=t+"-progress-bar",u=t+"-mute-button",a=t+"-unmute-status",r=t+"-mute-status",c=t+"-volume-bar",i=t+"-fullscreen-button";e.prototype={createContainer:function(){var e=document.createElement("DIV");return e.className=n,this.container=e,e},createControls:function(e){e=e||{};var t=[].concat(e.hide),n=document.createElement("DIV");return n.className=s,this.controls=n,this.initPlayButton(),this.initProgressBar(),t.indexOf("mute")<0&&this.initMuteButton(),t.indexOf("volume")<0&&this.initVolumeBar(),t.indexOf("fullscreen")<0&&this.initFullscreenButton(),n},changePlayButton:function(e){var t="play",n="pause";e?m.replaceClass(this.controls.playButton,n,t):m.replaceClass(this.controls.playButton,t,n)},initPlayButton:function(){var e=this,t=this.video,n=document.createElement("DIV");n.className=o,this.controls.playButton=n,this.changePlayButton(t.paused),m.on(n,"click",function(){t.paused===!0?(e.changePlayButton(!1),t.play()):(e.changePlayButton(!0),t.pause())}),m.on(t,"ended",function(){e.changePlayButton(!0)}),this.controls.appendChild(n)},initProgressBar:function(){var e=this.video,t=document.createElement("DIV");t.className=l;var n=m.createProgress(function(t){e.currentTime=e.duration*t});t.appendChild(n),m.on(e,"timeupdate",function(){var t=e.currentTime/e.duration*100;n.current.style.width=t+"%"}),this.controls.appendChild(t)},changeMuteButton:function(e){var t=this.controls.muteButton.buttonContent;e?m.replaceClass(t,r,a):m.replaceClass(t,a,r)},greyVolume:function(){var e=this.controls.volumeBar;"undefined"!=typeof e&&m.toggleClass(e,"grey","")},initMuteButton:function(){var e=this,t=this.video,n=document.createElement("DIV");n.className=u;var s=document.createElement("DIV");n.appendChild(s),this.controls.muteButton=n,this.controls.muteButton.buttonContent=s,this.changeMuteButton(!t.muted),m.on(n,"click",function(){t.muted===!0?(e.changeMuteButton(!0),e.greyVolume(!1),t.muted=!1):(e.changeMuteButton(!1),e.greyVolume(!0),t.muted=!0)}),this.controls.appendChild(n)},initVolumeBar:function(){var e=this.video,t=(e.volume,document.createElement("DIV"));t.className=c;var n=m.createProgress(function(t){e.volume=t});this.controls.volumeBar=t,this.controls.volumeBar.volume=n,n.current.style.width=100*e.volume+"%",t.appendChild(n),this.controls.appendChild(t)},initFullscreenButton:function(){var e=(this.video,this.container),t="full",n="exit",s=document.createElement("DIV");s.className=i+" "+t,m.on(s,"click",function(){function o(){var o="fullscreen-mode";m.hasClass(e,o)?(document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():console.log("The bowser doesn't support fullscreen mode"),m.removeClass(e,o)):(document.documentElement.requestFullscreen?e.requestFullscreen():document.documentElement.msRequestFullscreen?e.msRequestFullscreen():document.documentElement.mozRequestFullScreen?e.mozRequestFullScreen():document.documentElement.webkitRequestFullscreen&&e.webkitRequestFullscreen(),m.addClass(e,o)),m.toggleClass(s,t,n)}o()}),this.controls.appendChild(s)}};var m={createProgress:function(e){var t=document.createElement("DIV");t.className="total";var n=document.createElement("DIV");n.className="current",t.appendChild(n),t.current=n,this.on(t,"click",function(t){var s=this.offsetWidth,o=void 0===t.offsetX?t.layerX:t.offsetX;n.style.width=o/s*100+"%",e(o/s)});var s=!1;return this.on(t,"mousedown",function(e){0===e.button&&(s=!0)}),this.on(t,"mouseup",function(e){0===e.button&&(s=!1)}),this.on(t,"mousemove",function(e){if(s&&0===e.button){var t=this.offsetWidth,o=void 0===e.offsetX?e.layerX:e.offsetX;n.style.width=o/t*100+"%"}}),t},hasClass:function(e,t){return e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))},addClass:function(e,t){this.hasClass(e,t)||(e.className+=" "+t)},removeClass:function(e,t){var n=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className=e.className.replace(n,"")},replaceClass:function(e,t,n){this.removeClass(e,t),this.addClass(e,n)},toggleClass:function(e,t,n){this.hasClass(e,t)?this.replaceClass(e,t,n):this.hasClass(e,n)?this.replaceClass(e,n,t):this.addClass(e,t)},on:function(e,t,n){e.addEventListener(t,n,!1)},warp:function(e,t){var n=e.parentNode;n.replaceChild(t,e),t.appendChild(e)},setAttributes:function(e,t){for(var n in t)t.hasOwnProperty(n)&&e.setAttribute(n,t[n])}},d={create:function(t,n){var s;if(s="string"==typeof t?document.querySelectorAll(t):t,!s.length)return new e(s,n);if(1===s.length)return new e(s[0],n);for(var o=s.length-1;o>=0;o--){var l=[];return l.push(new e(s,n)),l}}};return d}();